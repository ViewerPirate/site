{% extends "admin/admin_layout.html" %}

{% block title %}
Meu Perfil - Painel do Artista
{% endblock %}

{% block content %}
<form id="profile-form">
    <div class="section-header">
        <h2 class="section-title">Meu Perfil Público</h2>
        <button type="submit" class="btn btn-primary"><i class="fas fa-save" style="margin-right: 8px;"></i> Salvar Alterações</button>
    </div>

    <p style="color: var(--cor-texto-secundario); font-size: 0.9rem; margin-top: -1rem; margin-bottom: 1.5rem;">
        As informações preenchidas aqui serão exibidas publicamente na sua página "Sobre" (no modo Estúdio) e na seleção de artistas para comissões.
    </p>

    <div class="settings-wrapper">
        <div class="settings-content" style="grid-column: 1 / -1;">

            <div class="card">
                <div class="card-header">
                    <h3 class="card-title" style="font-size: 1.2rem; font-weight: 600;">Informações Principais</h3>
                </div>
                <div class="form-group">
                    <label for="artist_name">Seu Nome ou Nome Artístico (Público)</label>
                    <input type="text" id="artist_name" name="artist_name" class="form-input">
                </div>
                <div class="form-group">
                    <label for="artist_avatar">URL da sua Imagem de Avatar/Logo</label>
                    <input type="url" id="artist_avatar" name="artist_avatar" class="form-input" placeholder="https://exemplo.com/sua-imagem.jpg">
                    <div style="margin-top: 15px; text-align: center;">
                         <img id="avatar-preview" 
                             src="https://placehold.co/150x150/1e1e1e/ffffff?text=Preview" 
                             alt="Pré-visualização do Avatar" 
                             referrerpolicy="no-referrer" 
                             style="width: 150px; height: 150px; border-radius: 50%; object-fit: cover; border: 4px solid var(--cor-surface); box-shadow: var(--sombra-suave);">
                    </div>
                </div>
                <div class="form-group">
                    <label for="artist_portfolio_description">Descrição Curta para Seleção de Artista</label>
                    <textarea id="artist_portfolio_description" class="form-input" rows="3" placeholder="Um breve resumo sobre seu estilo e especialidades."></textarea>
                </div>
                <div class="form-group">
                    <label for="artist_specialties">Especialidades (separadas por vírgula)</label>
                    <input type="text" id="artist_specialties" class="form-input" placeholder="Retratos, Cenários, Animação">
                </div>
                <div class="form-group">
                    <label class="toggle-switch">
                        <input type="checkbox" id="is_public_artist" name="is_public_artist">
                        <span class="slider"></span>
                        Disponível para comissões públicas no modo Estúdio
                    </label>
                </div>
            </div>

            <div class="card">
                <div class="card-header">
                    <h3 class="card-title" style="font-size: 1.2rem; font-weight: 600;">Conteúdo da Página "Sobre"</h3>
                </div>
                <div class="form-group">
                    <label for="artist_bio">Biografia Principal</label>
                    <textarea id="artist_bio" name="artist_bio" class="form-input" rows="5"></textarea>
                </div>
            </div>

            <div class="card">
                <div class="card-header">
                    <h3 class="card-title" style="font-size: 1.2rem; font-weight: 600;">Contatos e Redes Sociais</h3>
                </div>
                <p style="color: var(--cor-texto-secundario); font-size: 0.9rem; margin-top: -1rem; margin-bottom: 1.5rem;">Adicione os links para os seus perfis e formas de contato.</p>
                <div id="social-links-container">
                </div>
                <button type="button" id="add-social-btn" class="btn btn-light" style="margin-top: 15px; width: 100%;"><i class="fas fa-plus" style="margin-right: 8px;"></i> Adicionar Contato</button>
            </div>

            <div class="card">
                <div class="card-header">
                    <h3 class="card-title" style="font-size: 1.2rem; font-weight: 600;">Meus Serviços Individuais</h3>
                </div>
                <p style="color: var(--cor-texto-secundario); font-size: 0.9rem; margin-top: -1rem; margin-bottom: 1.5rem;">
                    Defina os serviços que você oferece individualmente. Eles aparecerão para os clientes quando seu perfil for selecionado.
                </p>
                <div id="artist-services-container">
                    </div>
                <button type="button" id="add-artist-service-btn" class="btn btn-light" style="margin-top: 15px; width: 100%;">
                    <i class="fas fa-plus" style="margin-right: 8px;"></i> Adicionar Serviço
                </button>
            </div>

        </div>
    </div>
</form>

<template id="social-link-template">
    <div class="social-link-item">
        <div class="social-icon-display">
            <i class="fas fa-link"></i>
        </div>
        <select class="form-input network-input"></select>
        <input type="url" class="form-input url-input" placeholder="URL do seu perfil ou valor do contato">
        <button type="button" class="btn btn-sm btn-danger remove-type-btn">&times;</button>
    </div>
</template>

<template id="artist-service-template">
    <div class="commission-type-item-wrapper">
        <div class="commission-type-header">
            <label>Nome do Serviço</label>
            <label>Descrição</label>
            <label>Preço</label>
            <label>Prazo (dias)</label>
        </div>
        <div class="commission-type-item">
            <input type="text" class="form-input service-name" placeholder="Ex: Retrato Digital">
            <input type="text" class="form-input service-description" placeholder="Descrição Breve">
            <input type="number" step="0.01" class="form-input service-price" placeholder="Ex: 350.00">
            <input type="number" step="1" class="form-input service-deadline" placeholder="Prazo">
            <button type="button" class="btn btn-sm btn-danger remove-service-btn" title="Remover Serviço">&times;</button>
        </div>
        <div class="phases-container">
            <div class="phases-header">
                <h6>Fases & Revisões</h6>
                <div class="phase-item-header">
                    <label>Nome da Fase</label>
                    <label>Nº de Revisões</label>
                </div>
            </div>
            <div class="service-phases-list">
                </div>
            <button type="button" class="btn btn-sm btn-light add-service-phase-btn" style="width: 100%; margin-top: 10px;">
                <i class="fas fa-plus"></i> Adicionar Fase
            </button>
        </div>
        <div class="form-group" style="margin-top: 15px; border-top: 1px dashed var(--cor-borda); padding-top: 15px;">
            <label class="toggle-switch">
                <input type="checkbox" class="service-is-active" checked>
                <span class="slider"></span>
                Serviço Ativo (visível para clientes)
            </label>
        </div>
    </div>
</template>

<template id="phase-item-template">
    <div class="phase-item">
        <input type="text" class="form-input phase-name" placeholder="Ex: Esboço">
        <input type="number" min="0" class="form-input phase-revisions" placeholder="Limite">
        <button type="button" class="btn btn-sm btn-danger remove-phase-btn" title="Remover Fase">&times;</button>
    </div>
</template>

{% endblock %}

{% block scripts %}
    <script src="{{ url_for('static', filename='js/admin_js/pages/meu_perfil.js') }}"></script>
{% endblock %}